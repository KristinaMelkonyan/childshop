{% extends "admin/base_site.html" %}
{% load i18n %}

{% block content %}
<div id="content-main">
    <h1>{{ title }}</h1>
    
    <p>–í—ã —Å–æ–±–∏—Ä–∞–µ—Ç–µ—Å—å –æ—Ç–º–µ–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–∫–∞–∑—ã:</p>
    
    <ul>
        {% for order in orders %}
        <li><strong>–ó–∞–∫–∞–∑ #{{ order.id }}</strong> –æ—Ç {{ order.user.get_full_name|default:order.user.username }} - {{ order.total_price }} ‚ÇΩ (–°—Ç–∞—Ç—É—Å: {{ order.get_status_display }})</li>
        {% endfor %}
    </ul>
    
    <p><strong>–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤: {{ orders|length }}</strong></p>
    <p><em>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –º–æ–∂–Ω–æ –æ—Ç–º–µ–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞–∫–∞–∑—ã —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–ù–æ–≤—ã–π"</em></p>

    <form method="post">
        {% csrf_token %}
        
        <!-- –°–∫—Ä—ã—Ç—ã–µ –ø–æ–ª—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ -->
        {% for order in orders %}
        <input type="hidden" name="_selected_action" value="{{ order.pk }}">
        {% endfor %}
        
        <input type="hidden" name="action" value="{{ action }}">
        <input type="hidden" name="post" value="yes">
        
        <div class="form-group">
            <label for="cancellation_reason" style="font-weight: bold; display: block; margin-bottom: 10px;">
                üìù –ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–∞–∑–∞ (–±—É–¥–µ—Ç –≤–∏–¥–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é):
            </label>
            <textarea 
                id="cancellation_reason" 
                name="cancellation_reason" 
                rows="5" 
                cols="80"
                placeholder="–£–∫–∞–∂–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—É—é –ø—Ä–∏—á–∏–Ω—É –æ—Ç–º–µ–Ω—ã –∑–∞–∫–∞–∑–∞. –≠—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ —É–≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å."
                style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; font-family: inherit;"
                required></textarea>
            <small style="color: #666; display: block; margin-top: 5px;">
                –ù–∞–ø—Ä–∏–º–µ—Ä: "–¢–æ–≤–∞—Ä –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –Ω–∞ —Å–∫–ª–∞–¥–µ", "–û—à–∏–±–∫–∞ –≤ —Å–∏—Å—Ç–µ–º–µ", "–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–∫–∞–∑–∞" –∏ —Ç.–¥.
            </small>
        </div>
        
        <div style="margin-top: 20px;">
            <button type="submit" name="apply" class="button" style="background: #dc3545; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">
                ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –æ—Ç–º–µ–Ω—É
            </button>
            <a href="{% url 'admin:main_order_changelist' %}" style="margin-left: 10px; padding: 10px 20px; background: #6c757d; color: white; text-decoration: none; border-radius: 5px;">
                ‚ùå –û—Ç–º–µ–Ω–∞
            </a>
        </div>
    </form>
</div>
{% endblock %}